{%- assign per_row = section.settings.per_row -%}
{%- assign product_limit = per_row | times: 1 -%}
{%- assign collection1 = collections[section.settings.collection1] -%}

{%- assign emptyState = false -%}
{%- if collection1.empty? -%}
  {%- assign emptyState = true -%}
{%- endif -%}


{% if section.settings.divider %}<div class="section--divider">{% endif %}

<div
  id="CollectionSection-{{ section.id }}"
  data-section-id="{{ section.id }}"
  data-section-type="collection-switcher"
  data-per-row="{{ per_row }}"
  class="featured-collection-new">

  {% assign grid_item_width = 'small--one-half medium-up--one-third' %}
  {% case per_row %}
  {% when 1 %}
    {%- assign grid_item_width = '' -%}
  {% when 2 %}
    {%- assign grid_item_width = 'medium-up--one-half' -%}
  {% when 3 %}
    {%- assign grid_item_width = 'small--one-half medium-up--one-third' -%}
  {% when 4 %}
    {%- assign grid_item_width = 'small--one-half medium-up--one-quarter' -%}
  {% when 5 %}
    {%- assign grid_item_width = 'small--one-half medium-up--one-fifth' -%}
  {% endcase %}

  {% comment %}
    Where in loop to break products up for slideshows
  {% endcomment %}
  {%- assign break1 = per_row -%}
  {%- assign break2 = per_row | times: 1 -%}
  <div class="product-slider-width">
     <div id="collection1-{{ section.id }}" class="collection-switcher__collection">
        <div
             class="grid collection-switcher__collection-grid grid-new"
             data-per-row="{{ per_row }}">
          <div class="grid__item grid-product small--one-half medium-up--one-third slider-index aos-init aos-animate slick-slide slick-current slick-active" data-aos="row-of-3" style="width: 578px;" tabindex="-1" role="option" aria-describedby="slick-slide130" data-slick-index="0" aria-hidden="false">
            <div class="grid-product__content">
              <div class="grid-product__image-mask">
                  <div class="image-wrap" style="height: 0; padding-bottom: 150.0%;"><img class="grid-product__image" alt="" src="https://cdn.shopify.com/s/files/1/2665/0346/files/mobile-banner-05.png?v=1611325249">
                    <noscript>
                      <img class="grid-product__image lazyloaded"
                           src="https://cdn.shopify.com/s/files/1/2665/0346/files/mobile-banner-05.png?v=1611325249"
                           alt="">
                    </noscript>
                  </div>
              </div>
              <!--<div class="grid-product__meta saleinfo">
                <div class="grid-product__title shop">SHOP</div>
              </div>-->
              <div class="saleinfo-container">
                <div class="grid-product__meta saleinfo margin">
                  <a href="/collections/UP-TO-25/mens">                    
                    <div class="grid-product__title shop">SHOP MENS 25% OFF</div>
                  </a>
                </div>
                <div class="grid-product__meta saleinfo margin">
                  <a href="/collections/UP-TO-25/womens">
                    <div class="grid-product__title shop">SHOP WOMENS 25% OFF</div>
                  </a>
                </div>
              </div>
            </div>
          </div>
          <div class="grid__item grid-product small--one-half medium-up--one-third slider-index aos-init aos-animate slick-slide slick-current slick-active" data-aos="row-of-3" style="width: 578px;" tabindex="-1" role="option" aria-describedby="slick-slide130" data-slick-index="0" aria-hidden="false">
            <div class="grid-product__content">
              <div class="grid-product__image-mask">
                  <div class="image-wrap" style="height: 0; padding-bottom: 150.0%;"><img class="grid-product__image" alt="" src="https://cdn.shopify.com/s/files/1/2665/0346/files/mobile-main-08.png?v=1611325249">
                    <noscript>
                      <img class="grid-product__image lazyloaded"
                           src="https://cdn.shopify.com/s/files/1/2665/0346/files/mobile-main-08.png?v=1611325249"
                           alt="">
                    </noscript>
                  </div>
              </div>

              <!--<div class="grid-product__meta saleinfo">
                <div class="grid-product__title shop">SHOP</div>
              </div>-->
              <div class="saleinfo-container"> 
                <div class="grid-product__meta saleinfo margin">
                  <a href="/collections/UP-TO-35/mens">                    
                    <div class="grid-product__title shop">SHOP MENS 35% OFF</div>
                  </a>
                </div>
                <div class="grid-product__meta saleinfo margin">
                  <a href="/collections/UP-TO-35/womens">
                    <div class="grid-product__title shop">SHOP WOMENS 35% OFF</div>
                  </a>
                </div>   
              </div>
            </div>
          </div>
          <div class="grid__item grid-product small--one-half medium-up--one-third slider-index aos-init aos-animate slick-slide slick-current slick-active" data-aos="row-of-3" style="width: 578px;" tabindex="-1" role="option" aria-describedby="slick-slide130" data-slick-index="0" aria-hidden="false">
            <div class="grid-product__content">
              <div class="grid-product__image-mask">
                  <div class="image-wrap" style="height: 0; padding-bottom: 150.0%;"><img class="grid-product__image" alt="" src="https://cdn.shopify.com/s/files/1/2665/0346/files/mobile-banner-07.png?v=1611325249">
                    <noscript>
                      <img class="grid-product__image lazyloaded"
                           src="https://cdn.shopify.com/s/files/1/2665/0346/files/mobile-banner-07.png?v=1611325249"
                           alt="">
                    </noscript>
                  </div>
              </div>
              <!--<div class="grid-product__meta saleinfo">
                <div class="grid-product__title shop">SHOP</div>
              </div>-->
              <div class="saleinfo-container">
                <div class="grid-product__meta saleinfo margin">
                  <a href="/collections/UP-TO-45/mens">                    
                    <div class="grid-product__title shop">SHOP MENS 45% OFF</div>
                  </a>
                </div>
                <div class="grid-product__meta saleinfo margin">
                  <a href="/collections/UP-TO-45/womens">
                    <div class="grid-product__title shop">SHOP WOMENS 45% OFF</div>
                  </a>
                </div>
              </div>
            </div>
          </div>
        </div>
    </div>
  </div>
</div>

{%- if settings.quick_shop_enable -%}
  {%- unless collection1.empty? -%}
    {% for product in collection1.products limit: product_limit %}
      {% include 'quick-shop-modal' %}
    {% endfor %}
  {%- endunless -%}
{%- endif -%}

{% if section.settings.divider %}</div>{% endif %}

{% schema %}
  {
    "name": "3 Tile Custom",
    "class": "index-section index-product-slider-margin",
    "settings": [
      {
        "type": "text",
        "id": "title",
        "label": "Heading",
        "default": "Most popular"
      },
      {
        "id": "collection1",
        "type": "collection",
        "label": "Collection 1"
      },
      {
        "type": "range",
        "id": "per_row",
        "label": "Products per row",
        "default": 3,
        "min": 3,
        "max": 5,
        "step": 1
      },
	  {
        "type": "url",
        "id": "link",
        "label": "Slide link"
      },
      {
        "type": "checkbox",
        "id": "view_all",
        "label": "Show 'View all' link",
        "default": true
      },
      {
        "type": "checkbox",
        "id": "divider",
        "label": "Show section divider",
        "default": false
      }
    ],
    "presets": [{
      "name": "3 Tile Custom",
      "category": "Collection"
    }],
    "blocks" : []
  }
{% endschema %}
