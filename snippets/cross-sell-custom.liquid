{% comment %}
============= Warning: DO NOT EDIT THIS FILE UNLESS YOU KNOW WHAT YOU'RE DOING! =============

Please beware that editting this file could break your site as it's referenced in your theme's main theme.liquid file!

Also, if you're testing changes, please do so on a duplicate theme to avoid downtime for your users!

Instructions:
1) create a file named 'cross-sell-custom' inside of your Snippets folder.
Once created it SHOULD say 'cross-sell-custom.liquid' IF NOT, rename it.
2) make sure the 3 lines of code below are added BEFORE the </head> element of your theme.liquid file (or main theme file)

<!-- Cross Sell custom code start. Do not change -->
{%include 'cross-sell-custom'%}
<!-- Cross Sell custom code end. Do not change -->

3) Make sure you to SAVE the changes made to your theme.liquid file
4) Have Cross Sell's Settings -> Display Settings set to "custom" theme, and activate the carousel feature if needed.
5) Save your Settings

Have problems or feedback? DON'T PANIC! Email us at support@csell.co or check out support site -> https://help.csell.co

============= Warning: DO NOT EDIT THIS FILE UNLESS YOU KNOW WHAT YOU'RE DOING! =============
{% endcomment %}

<style type="text/css">
/* inherit fonts for all elements */
  #cross-sell *{font-family: inherit !important;}
  .xsell__modal .xsell__modal-content{font-family: inherit !important;}
  .xsell__modal-content {height: 490px !important;}  


/* cross sell container */
#cross-sell{}

/* change header styles */
h3.crosssell-title{}

/* cross sell elements */

  /* xsell card container */
.cross-sell.xs-v2 .xs-card {}
  /* xsell title */
.cross-sell.xs-v2 .xs-card .xs-card-body .xs-product-title{}

  /* xsell vendor */
.cross-sell.xs-v2 .xs-card .xs-card-body .xs-vendor-name{}

  /* xsell prices */
.cross-sell.xs-v2 .xs-card .xs-card-body .xs-price{}

  /* change sales badge */
.cross-sell.xs-v2 .xs-card .xs-image .xs-sales-badge {}

  /* change image sizes desktop */
  @media only screen and (min-width: 769px) {
  .cross-sell.xs-v2 .xs-card{width:300px !important;}
  .cross-sell.xs-v2 .xs-card .xs-image{width:300px !important;}
  .cross-sell.xs-v2 .xs-card .xs-image img{width:300px !important;}
  }

  /* change image sizes mobile */
  @media only screen and (max-width: 768px) {
    .cross-sell.xs-v2 .xs-card{width:300px !important;}
    .cross-sell.xs-v2 .xs-card .xs-image{width:300px !important;}
    .cross-sell.xs-v2 .xs-card .xs-image img{width:300px !important;}
  }

/* carousel */
.cross-sell .flickity-prev-next-button.previous{}
.cross-sell .flickity-prev-next-button.next{}
.cross-sell .flickity-prev-next-button{}
.cross-sell .flickity-prev-next-button .flickity-button-icon{}
/*******************************/
/* popup & quickview elements */
/*******************************/
  .xsell__modal-product-container {
   margin-bottom: 75px !important; 
  }
  .xsell__modal .xsell__modal-wrap {
   margin: 15.75rem auto !important;
  }

/* quickview -> make sure it's set to Bpbby in Settings! */
.xsell__modal .xsell__modal-header .xsell__modal-added-to-cart {
 display: none !important; 
}
  .xsell__modal-product {
    height: 340px !important; 
  }
  
/* TODO: fix close x on popup to be same as Quickview */
  .xsell__modal .xsell__modal-header .xsell__modal-close:after{border-left:5px solid #3e3e3e !important; height:20px !important}
  .xsell__modal .xsell__modal-header .xsell__modal-close:before{border-left:5px solid #3e3e3e !important; height:20px !important}
  .xsell__modal .xsell__modal-header .xsell__modal-close{top:10px !important; right:10px !important;}

.xsell__modal .xsell__modal-more-info .xsell__modal-more-info-title {} /* product title top */
.xsell__modal-product-price{} /* quickview price */
.xsell__modal .xsell__modal-select label{} /* options selector label */
.xsell__modal .xsell__modal-select select{} /* options selector options */
.xsell__modal-more-info-add-to-cart-btn{} /* ATC quickview */
.xsell__modal .xsell__modal-more-info .xsell__modal-more-info-description{} /* quickview description text */

  .xsell__modal .xsell__modal-product .xsell__modal-product-overlay {
    margin-top: 10px !important; 
    opacity:1 !important;
    position: relative !important;
  }
  
  .productcontainer {
    background: #fff;
    height:  350px;
    padding-left: 10px;
    padding-right: 10px;
    padding-top: 15px;
    margin: 10px;
  }

  .producttitle {
   font-size: .75em;
    margin: 5px 0;
    white-space: nowrap;
    overflow: hidden;
  }
  
  button.upbutton {
    background: black;
    margin-top: 10px;
    color: white;
    padding: 4px 40px;
    border-radius: 40px;
    border: 1px solid black;
    font-size: .85em;
  }

  
  /* overlay */
.xsell__modal .xsell__modal-product:hover .xsell__modal-product-overlay{
  margin-top: 10px !important; 
  position: relative !important;
  opacity:1 !important;
  position:absolute !important;
  background:transparent !important;
  height:0 !important;
  width:100% !important;
  display:flex !important;
  align-content:center !important;
  justify-content:center !important;  
} /* popup overlay */
.xsell__modal .xsell__modal-product .xsell__modal-product-overlay .xsell__modal-product-button{
  position: relative !important;
  opacity:1 !important;
  padding: 12px 25px !important;
  background-color: #000 !important;
  border:2px solid #000 !important;
  color:#fff !important;
  text-transform:uppercase !important;
  font-size:16px !important;
  position:relative !important;
  display:block !important;
  cursor:pointer !important;
  padding: 7px 53px !important;
} /* popup overlay button */
.xsell__modal .xsell__modal-header .xsell__modal-content-title{} /* header */
.xsell__modal .xsell__modal-product .xsell__modal-product-title{} /* title on overlay & popup */
.xsell__modal-product-price{}  /* price on overlay & popup & quickview */
  
  .xsell__modal-product-title {
   margin-top:10px !important; 
    font-size: .65em !important;
  }
  
  .crossselltitle {
   color: #fff; 
  }




</style>


<script>
  window.xsellCustom = window.xsellCustom || {};
  window.xsellCustom.theme_settings = window.xsellCustom.theme_settings || {};
  window.xsellCustom.buildxsellsoutput = function(xsellitems, numproducts){
   	var xsmustbeavailable = xsellSettings.xsmustbeavailable;
   	var xshideifincart = xsellSettings.xshideifincart;
   	var xsdisplaycompareatprice = xsellSettings.xsdisplaycompareatprice;
   	var xsdisplaysalebadge = xsellSettings.xsdisplaysalebadge;
   	var xsdisplaypricevarieslabel = xsellSettings.xsdisplaypricevarieslabel;
   	var xsdisplayvendor = xsellSettings.xsdisplayvendor;
    var xsimagesize = 'large';
    var xsvendoroutput = '';
    var xspricevarieslabel = '';
    var xscompareatprice = '';
    var xscompareatpricestring = '';
  	var xssalepricestring = '';
   	var xspriceoutput = '';
    var xssalebadge = '<span class="badge badge--sale"><span class="badge__text">SALE</span></span>';
  	var xssalebadgeoutput = '';
    var saleclass = ' xs-sale';
    var fromlabel = '<em>from</em>';
    var xsprice = '';

    // add custom variables here

    for(var x=0; x < numproducts; x++) {
    	var xsproductdata = xsellitems[x];
      if(xsproductdata.images.length > 1) {
        var csimage = xsellLib.productimageurls(xsproductdata.images[0]);
        var csimagetwo = xsellLib.productimageurls(xsproductdata.images[1]);
      }
      else if(xsproductdata.images.length == 1) {
        var csimage = xsellLib.productimageurls(xsproductdata.images[0]);
        var csimagetwo = 'https://cdn.shopify.com/s/images/admin/no-image-'+xsimagesize+'.gif';
      }
      else {
        var csimage = 'https://cdn.shopify.com/s/images/admin/no-image-'+xsimagesize+'.gif';
        var csimagetwo = csimage;
      }
      if(xsdisplayvendor) {
        xsvendoroutput = '<div class="xs-vendor-name"><a href="' + xsproductdata.url +'">' + xsproductdata.vendor + '</a></div>';
      }

      xsprice = xsellLib.xsformatMoney(xsproductdata.price, '{{ shop.money_format }}');
      if(xsdisplaypricevarieslabel) {
      	if(xsproductdata.price_varies) {
            xspricevarieslabel = 'From: ';
        	}
        	else {
          	xspricevarieslabel = '';
        	}
      }             xspriceoutput = '<div class="money" id="upsell-money"><a href="' + xsproductdata.url +'">' + xspricevarieslabel + xsprice + '</a></div>';             if(xsdisplaycompareatprice)
      {

      if(!xsproductdata.price_varies && (xsproductdata.compare_at_price > xsproductdata.price)) {
             xscompareatprice = xsellLib.xsformatMoney(xsproductdata.compare_at_price, '{{ shop.money_format }}');
            xscompareatpricestring = '<span class="xs-compare-at-price">' + xscompareatprice + '</span>';
            xssalepricestring = '<span class="xs-sale-price"><a href="' + xsproductdata.url +'">' + xsprice + '</a></span>';
            xspriceoutput = '<div class="money' + saleclass + '">' + xscompareatpricestring + ' ' + xspricevarieslabel + xssalepricestring + '</div>';
        }
      }
      if(xsdisplaysalebadge) {
        if(xsproductdata.compare_at_price > xsproductdata.price) {
          xssalebadgeoutput = xssalebadge;
        }
        else {
          xssalebadgeoutput = '';
        }
      }

      xsellLib.xselloutput +='<li class="carousel-item" data-xsorder="' + xsproductdata["order"] + '">'
                           + '<div class="productcontainer">'
                           + '<div class="image">'
                           + '<a href="' + xsproductdata.url +'">'
                           + xssalebadgeoutput
                           + '<img src="' + csimage + '" />'
                           + '</a>'
     					   + '<div class="producttitle">'
                           + '<a href="' + xsproductdata.url + '">' +xsproductdata.title + '</a>'
                           + '</div>'
                           + xsvendoroutput
                           + xspriceoutput     
    					   + '<button class="upbutton"><a style="color:white;" href="' + xsproductdata.url + '">' +"More Info" + '</a></button>'      
                           + '</div>'
                           + '</div>'      
                           + '</li>';
 		

      }

    if(xsellLib.xselloutput != ''){
      var xsellDiv = document.createElement('div');
      xsellDiv.innerHTML = '<h3 class="crossselltitle">' + xsellLib.settings.xstitle + '</h3><ul class="cross-sell carousel" id="cslider"><div class="carousel-inner">' + xsellLib.xselloutput + '</div><a class="carousel-control-prev" href="#cslider" role="button" data-slide="prev"><span class="carousel-control-prev-icon" aria-hidden="true"></span><span class="sr-only">Previous</span></a><a class="carousel-control-next" href="#cslider" role="button" data-slide="next"><span class="carousel-control-next-icon" aria-hidden="true"></span><span class="sr-only">Next</span></a></ul>'; //output here
      document.getElementById('cross-sell').appendChild(xsellDiv);
    }
        

        document.getElementsByClassName('carousel-item')[0].className += " active";
        $('.carousel .carousel-item').each(function(){
          var next = $(this).next();
          if (!next.length) {
            next = $(this).siblings(':first');
          }
          next.children(':first-child').clone().appendTo($(this));

          for (var i=0;i<2;i++) {
            next=next.next();
            if (!next.length) {
              next = $(this).siblings(':first');
            }

            next.children(':first-child').clone().appendTo($(this));
          }
        });

  }
</script>
